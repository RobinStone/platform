$(document).on('click', 'input[name="code-r"]', function(e) {    let obj = this;    clipboard_get(function(clip) {        $(obj).val(clip);    });});function auth() {    $('.auth-form').removeClass('invisible');    setTimeout(function() {        $('.auth-form').addClass('open');        setTimeout(function() {            setOverlayJust();            $('main').addClass('blur');        }, 100);    }, 10);}function hide_auth() {    $('.auth-form').removeClass('open');    delOvelay();    setTimeout(function() {        $('main').removeClass('blur');        $('.auth-form').addClass('invisible');    }, 300);}function pass_no_pass(obj) {    let types = $(obj).parent().find('input').attr('type');    if(types === 'password') {        $(obj).parent().find('input').attr('type', 'text');    } else {        $(obj).parent().find('input').attr('type', 'password');    }}function auth_send() {    let arr = {        'email-r':$('.auth-form input[name="email-r"]').val(),        'password-r':$('.auth-form input[name="password-r"]').val(),    };    console.dir(arr);    AJAX('/', {'email-r': arr['email-r'], 'password-r': arr['password-r'], 'auth-r':'rbs'}, function(mess) {        switch(mess) {            case 'admin':                location.href = '/admin';                break;            case 'ok':                location.href = '/';                break;            case 'profil':                location.href = '/profil';                break;            default:                say('Таких авторизационных данных<br>в нашей базе - обнаружено...', 2);                break;        }    });    return false;}function reg() {    let form = $('<form id="reg-form" class="auth-form open" method="post" action="/"></form>');    $('#body-s').append(form);    loadTemplateIn('reg-form', 'reg-form', {}, function(e) {        $('#auth-form').addClass('invisible');        $('#auth-form').removeClass('open');    });}function reg_send() {    AJAX('/', {'phone-r':$('#reg-form input[name="phone-r"]').val(), 'name-r':$('#reg-form input[name="name-r"]').val(), 'email-r':$('#reg-form input[name="email-r"]').val(), 'password-r':$('#reg-form input[name="password-r"]').val(), 'reg-r':'rbs'}, function(mess) {        mess_executer(mess, function() {            // say('Для активации вашей учётной записи - перейдите в вашу почту, найдите письмо от нас и пройдите по предложенной там ссылке!', 4);            $('#container').remove();            $('#reg-form').remove();            open_popup('message', {text: 'Для активации вашей учётной записи - перейдите в вашу почту, найдите письмо от нас и пройдите по предложенной там ссылке!'});        });    });    return false;}function email_code_auth() {    let email = $('input[name="email-r"]').val();    $('.auth-form-inner .auth-field:nth-child(3)').addClass('invisible');    $('.auth-form-inner label:nth-child(4)').addClass('invisible');    $('.auth-form-inner .forgot-pass').addClass('invisible');    $('.auth-form-inner .btn:nth-child(6)').addClass('invisible');    $('.auth-form-inner .auth-field:nth-child(2) legend').text('Введите ваш E-Mail');    if(email.length < 5) {        rubber($('input[name="email-r"]'));    } else {        buffer_app = 'SHOPS';        SENDER_APP('auth_email_code', {email: $('input[name="email-r"]').val()}, function(mess) {            mess_executer(mess, function(mess) {                $('.auth-form-inner p:first-child').html('На указанную почту вам был отправлен код,<br>введите его в поле ниже и нажмите<br>"ВОЙТИ ПО КОДУ".');                $('.auth-form-inner .auth-field:nth-child(2) legend').text('5-ти значный код из E-Mail');                $('input[name="email-r"]').attr('type', 'number');                $('input[name="email-r"]').attr('name', 'code-r');                $('input[name="code-r"]').val('');                $('input[name="code-r"]').attr('placeholder', '');                setTimeout(function() {                    rubber($('input[name="code-r"]'));                }, 500);                $('div.paddinger-5px').addClass('invisible');                $('div.paddinger-5px').after($('<button onclick="auth_code()" type="button" class="btn flex align-center between gap-15 svg-white" style="padding: 17px 12px; margin-bottom: 15px">ВОЙТИ ПО КОДУ</button>'));            });        });    }}function auth_code() {    let code = $('input[name="code-r"]').val();    if(code.length === 5) {        buffer_app = 'SHOPS';        SENDER_APP('auth_code', {code: code}, function(mess) {            mess_executer(mess, function(mess) {                location.href = 'https://rumbra.ru/profil?title=account';            });        });    }}function sms_reg() {    $('#krest').attr('onclick', 'location.reload()');    $('.auth-form-inner p:first-child').html('Если нет аккаунта<br>Введите ваш номер телефона,<br>(обязательно с кодом страны), напр. 7 9232811515');    $('#auth-form header span:first-child').text('Регистрация');    $('.auth-form-inner fieldset:nth-child(2) legend').text('Ваш номер телефона');    $('.auth-form-inner fieldset:nth-child(2) input').val('');    $('.auth-form-inner fieldset:nth-child(2) input').attr('type', 'tel');    $('.auth-form-inner fieldset:nth-child(2) input').attr('name', 'phone');    $('.auth-form-inner fieldset:nth-child(2) input').attr('autocomplete', 'off');    $('.auth-form-inner fieldset:nth-child(2) input').addClass('phone-corrector');    $('.auth-form-inner fieldset:nth-child(2) input').attr('placeholder', '+7 XXXXXXXXXX');    $('.auth-form-inner fieldset:nth-child(3)').remove();    $('.forgot-pass').remove();    $('.auth-form-inner button:nth-child(3)').remove();    $('.auth-form-inner .paddinger-5px button:first-child').remove();    $('.auth-form-inner .paddinger-5px button').addClass('disabled');    $('.auth-form-inner .paddinger-5px button').addClass('btn-send-sms');    $('.auth-form-inner .paddinger-5px button svg').after('<span>Получить код</span>');    $('.auth-form-inner label').remove();    $('.btn-send-sms').attr('onclick', 'registred_sms()');    $('.btn-send-sms').text('Отправить');    // $('.auth-form-inner .paddinger-5px').append('<button type="button" onclick="coder_inputer()">CODE</button>');}function tele_reg_auth() {    location.href = 'https://t.me/rumbra_bot?start=auth';}let correct = ['0','1','2','3','4','5','6','7','8','9']; // +375 44 772-59-49$(document).on('keydown', '.phone-corrector', function(e) {    if(!correct.includes(e.key) && e.keyCode !== 8 && e.keyCode !== 37 && e.keyCode !== 39) {        e.preventDefault();    }});$(document).on('input', '.phone-corrector', function(e) {    let txt = $('.phone-corrector').val();    let cleanedText = txt.replace(/\D/g, '');    $('.phone-corrector').val(cleanedText);    setTimeout(function() {        if($('.phone-corrector').val().length >= 11 && $('.phone-corrector').val().length <= 12) {            $('.btn-send-sms').removeClass('disabled');        } else {            $('.btn-send-sms').addClass('disabled');        }    }, 100);});$(document).on('keyup', '.phone-corrector', function(e) {    if($('.phone-corrector').val().length >= 11 && $('.phone-corrector').val().length <= 12) {        $('.btn-send-sms').removeClass('disabled');    } else {        $('.btn-send-sms').addClass('disabled');    }});function registred_sms() {    let phone = $('.phone-corrector').val();    if(phone.length >= 11 && phone.length <=12) {        SENDER('registred_sms', {phone: phone}, function(mess) {            mess_executer(mess, function(mess) {                coder_inputer(phone);            });        });    }}function coder_inputer(phone='000') {    $('.auth-form-inner p:first-child').html('На номер <b>'+phone+'</b> отправлен 5-тизначный код.<br>Для успешного завершения регистрации, введите его в поле ниже.');    let inpt = $('.auth-form-inner fieldset:nth-child(2) input');    inpt.val('');    inpt.attr('type', 'number');    inpt.attr('name', 'code');    inpt.removeClass('phone-corrector');    inpt.attr('placeholder', 'XXXXX');    $('.auth-field legend').text('XXXXX - код из SMS');    let btn = $('.btn-send-sms');    btn.attr('onclick', 'complite_registred_sms()');    btn.find('span').text('Завершить регистрацию');    $('.btn-send-sms').removeClass('disabled');}function complite_registred_sms() {    let code = parseInt($('.auth-form-inner fieldset:nth-child(2) input').val());    if(code < 10000 || code > 99999) {        say('Формат кода не верный!..', 2);        return false;    }    $('.btn-send-sms').addClass('disabled');    SENDER('complite_registred_sms', {code: code}, function(mess) {        mess = JSON.parse(mess);        if(mess.status === 'error') {            say(mess.body, 2);            setTimeout(function() {                location.reload();            }, 7000);        } else if(mess.status === 'ok') {            location.href = '/profil?title=account&message=registrated';            say('Успешно.<br>Сейчас вы будете перенаправлены на ваш профиль');        }    });}function forgot_pass() {    let log = $('input[name="email-r"]').val();    if(log.length < 3) {        say('Введите в поле<br>Ваш телефон, логин или e-mail<br>что-то из этого...', 2);        return false;    }    say(VALUES.email_phone_string(log));}setTimeout(function() {    if(isset_param_in_address_row('auth')) {        auth();    }}, 500);