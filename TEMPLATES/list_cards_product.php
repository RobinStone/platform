<?php f_('slider', './TEMPLATES/list_cards_product.php', 7); ?><?phpINCLUDE_CLASS('shops', 'favorite');//wtf($preview_cards_product, 1);$keys = array_keys($preview_cards_product);//wtf($keys);$rows = SQL_ROWS_FIELD(q("    SELECT `id`, `shop_id`, `prod_id`     FROM `indexer`     WHERE CONCAT(`shop_id`, '_', `prod_id`) IN ('" . implode("','", $keys) . "')"), 'id');$result = array_combine(    array_map(function($row) {        return $row['shop_id'] . '_' . $row['prod_id'];    }, $rows),    $rows);//wtf($result);$preview_cards_product = FAVORITE::verify_like_products($preview_cards_product, Access::userID(), 'id_shop', 'id_product');foreach($preview_cards_product as $k=>$v) {    $preview_cards_product[$k]['indexer'] = $result[$k]['id'];}if(Access::scanLevel() < 1) {    $basket = $_COOKIE['basket'] ?? '';} else {    $basket = $_COOKIE['basket-id-user'] ?? '';}if(isset($basket) && $basket !== '') {    $B = new BASKET($basket);    $preview_cards_product = $B->verify_in_basket_product($preview_cards_product);} else {    foreach($preview_cards_product as $k=>$v) {        $v['IN_BASKET'] = 0;        $preview_cards_product[$k] = $v;    }}?><section class="wrapper products-list">    <h2 class="h2 visually-hidden"><?php if(isset($title)) { echo $title; } else echo 'Рекомендовано для Вас'; ?></h2>    <ul>        <?php        foreach($preview_cards_product as $k=>$v) {            $shop_id = (int)explode('_', $k)[0];            $product_id = (int)$v['id_product'];            (int)$discount = $v['DISCOUNT'] ?? 0;            include './TEMPLATES/one-cart.php';        } ?>    </ul></section><?php f_end('slider'); ?>