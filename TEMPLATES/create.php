<?php$img = "/IMG/img100x100/".$shops[$key]['logo'];if(!file_exists('.'.$img)) {    $img = './IMG/SYS/renigate.svg';}?><section class="wrapper creator">    <h1 class="creator-h1 flex between align-center">        <div>Подача объявления</div>        <div class="flex gap-10 align-center">            <img style="object-fit: contain" src="<?=$img?>" width="80" height="100">            <?php if(count($shops) > 1) { ?>            <div class="wrapper-input">                <select onchange="change_shop(this)" class="select">                    <?php foreach($shops as $k=>$v) {                        if($k === $key) {                            echo '<option selected data-id="'.$k.'">'.$v['name'].'</option>';                        } else {                            echo '<option data-id="'.$k.'">'.$v['name'].'</option>';                        }                    } ?>                </select>                <button style="pointer-events: none; cursor: pointer" class="btn"><span class="svg-wrapper"><?=RBS::SVG('row_down')?></span></button>            </div>            <?php } else {                echo '<span>'.$shops[$key]['name'].'</span>';            } ?>        </div>    </h1>    <?php    if(!$edit_mode && !$ready_cats) {        echo '<h2 style="width: 100%; text-align: center; margin-bottom: 25px">Нужно выбрать категорию</h2>';        echo '<div class="flex gap-10 flex-wrap center cat-buttons" style="padding: 5p 10px 15px">';        $categorys = [];        $count_show = 9;        foreach($CAT->main_cats as $v) {            if($count_show-- <= 0) {                echo '<button data-type="main" data-main="'.$v['id'].'" class="cat-btn btn-just invisible">'.$v['category'].'</button>';            } else {                echo '<button data-type="main" data-main="'.$v['id'].'" class="cat-btn btn-just">'.$v['category'].'</button>';            }        }        echo '<button onclick="$(\'.cat-buttons .cat-btn\').toggleClass(\'invisible\')" class="btn-just" style="background-color: #000; color: #fff">Показать ещё</button>';        echo '</div>';        echo '<div class="flex gap-10 flex-wrap center finder-cat-buttons invisible" style="padding: 5p 10px 15px"></div>';        echo '<div class="flex center column" style="width: 100%">';        echo '<h2 style="width: 100%; text-align: center; margin-bottom: 25px">или начните вводить название объявления</h2>';        echo '<input oninput="analised_catagorys(this)" placeholder="название объявления" type="text" class="anlised-input">';        echo '</div>';    }    ?>    <?php if($edit_mode || $ready_cats) { ?>    <div class="loader-img-form" style="position: relative">        <div class="flex align-center gap-20 loader-form  upload-zone">            <button onclick="load_new_img()" id="add-btn" class="btn flex align-center gap-15">                <span class="svg-wrapper"><?=RBS::SVG('downloader')?></span>                <span>Добавьте фотографии</span>            </button>            <span class="drop-down-panel">Или перетащите сюда</span>            <div onclick="append_old_images()" title="Кликните для добавления ранее загруженных изображений" style="margin-left: auto" class="flex align-center gap-10 action-btn loader-old-imgs">                <span class="svg-wrapper"><?=RBS::SVG('img')?></span>                <span id="count-imgs">Загружено 0 из 5</span>            </div>        </div>        <div class="info-photo-text" style="padding: 0 0 20px 20px; margin-top: -10px">Используйте реальные фото вашего товара в разных ракурсах.<br>Максимальный размер: до 5 МБ.</div>    </div>    <?php } ?>    <div class="table-focus table-focus-2">    <?php    // ПОДКЛЮЧАЕМ САМ РЕНДЕР ФОРМЫ    if($edit_mode || $ready_cats) {        include './TEMPLATES/FORMS/product_creator.php';    }    ?>    </div></section><script>    let shops = JSON.parse('<?= json_encode($shops, JSON_UNESCAPED_UNICODE); ?>');    console.dir(shops);    if(!isset_script('general_files')) {        include_js_script('general_files');        console.log('general_files.js is loaded');    }    setTimeout(function() {        if(typeof order_vals !== 'undefined') {            console.log('Ключи.');            let keys = Object.keys(order_vals);            console.dir(keys);            console.log('Автозаполнение динамических полей.');            console.dir(order_vals);            let visible = 1;            let blocked = 0;            let fixed = false;            for(let i in keys) {                if($('*[data-old-props-id="'+keys[i]+'"]').length === 0) {                    visible = 1;                    blocked = 0;                    if(typeof order_vals[keys[i]]['visible'] !== 'undefined') {                        visible = parseInt(order_vals[keys[i]]['visible']);                    }                    if(typeof order_vals[keys[i]]['block'] !== 'undefined') {                        blocked = parseInt(order_vals[keys[i]]['block']);                    }                    if(typeof order_vals[keys[i]]['fixed'] !== 'undefined' && order_vals[keys[i]]['fixed'] === 1) {                        fixed = true;                    }                    let cont = add_prop(order_vals[keys[i]]['field_type'], visible, blocked);                    $(cont).addClass('created-row')                    $(cont).find('td:first-child input').val(order_vals[keys[i]]['name']);                    if(fixed) {                        $(cont).find('td:first-child input').attr('readonly', 'true');                    }                    $(cont).find('td:nth-child(2) *').val(order_vals[keys[i]]['VALUE']);                    $(cont).attr('data-old-props-id', keys[i]);                    $(cont).attr('data-param-num', i);                    if(fixed) {                        $(cont).find('td:nth-child(3)').css('display', 'none');                    }                }            }        }    }, 10);    <?php    include_once './APPLICATIONS/SHOPS/add_fields.php';  // тут лежат поля    echo 'order_vals_edit='. json_encode($ADDED_FIELDS, JSON_UNESCAPED_UNICODE);    ?></script>