<div class="wrapper main-header" style="margin-bottom: 20px">    <h1><?=Core::$h1;?></h1></div><div class="wrapper">    <?php echo "<div id='alerts'>" . render('alerts') . "</div>"?></div><section class="wrapper">    <div class="basket">        <div class="count-row flex between">            <span>Найменований товаров (<span id="names-count"><?=count($arr)?></span>)</span>            <button onclick="remove_all_from_basket()" class="action-btn red-button">Удалить всё</button>        </div>        <ul class="basket-shops-list">        <?php foreach($shops as $k=>$v) {//            wtf($v, 1);            ?>            <li data-shop-id="<?=$v['id']?>" class="shop-wrapper">                <header class="flex between align-center">                    <div class="flex align-center gap-10">                        <img width="50" height="50" src="<?='/DOWNLOAD/'.$v['owner']['avatar']?>">                        <div class="user-name"><?=VALUES::getParamFromString($v['owner']['params'], 'name', $v['name'])?></div>                    </div>                    <button onclick="remove_shop_from_basket($(this).closest('li.shop-wrapper'))" class="action-btn red-button">Удалить товары этого магазина</button>                </header>                <div class="line-row"></div>                <table>                    <?php                    $total_price_shop = 0;                    $shop_count_products = 0;                    foreach($v['PRODUCTS'] as $kk=>$vv) {                        $count_pr = (int)$vv['COUNT'];   // количество единиц товаров                        $descr = strip_tags($vv['ITEM']['PROPS']['descr'][0]['value']);                        $price = (float)$vv['ITEM']['price'];                        $discount = (int)$vv['ITEM']['PROPS']['discount'][0]['value'];                        if($discount > 0) {                            $price = $price - ($price*$discount/100);                        }                        $count = (int)$vv['COUNT'];                        $shop_count_products += $count;                        if(mb_strlen($descr) > 150) {                            $descr = mb_substr($descr, 0, 150)."...";                        }                        ?>                        <tr <?php if($discount > 0) {echo 'data-discount="'.$discount.'"'; } else { echo 'data-discount="0"'; } ?> class="basket-item" data-product-code="<?=$vv['ITEM']['code']?>" data-price="<?=$vv['ITEM']['price']?>">                            <td width="65%">                                <div class="img-name-block" style="position: relative">                                    <img width="135" height="96" src="/IMG/img300x300/<?=$vv['ITEM']['PROPS']['images'][0]['value']?>">                                    <?php                                    if($discount > 0) {                                        echo '<span class="discount">-'.$discount.' %</span>';                                    }                                    ?>                                    <div class="text-name">                                        <p class="name"><?=$vv['ITEM']['name']?></p>                                        <div class="descr"><?=$descr?></div>                                    </div>                                </div>                            </td>                            <td width="25%">                                <div class="counter flex align-center">                                    <button onclick="operation('+', this, <?=(int)$vv['ITEM']['count']?>)" class="action-btn"><?=RBS::SVG('plus.svg')?></button>                                    <div class="count-prods"><?=$count?></div>                                    <button onclick="operation('-', this)" class="action-btn"><?=RBS::SVG('minus.svg')?></button>                                </div>                            </td>                            <td width="10%">                                <div class="flex column between">                                    <div class="price">                                        <?=VALUES::price_format($price*$count)?> P                                    </div>                                    <button onclick="delete_item_from_basket($(this).closest('tr.basket-item'))" class="garb-btn action-btn"><?=RBS::SVG('garbage_3.svg')?></button>                                </div>                            </td>                        </tr>                    <?php                    $total_price_shop += $price * $count;                    } ?>                </table>                <footer class="flex">                    <div class="flex column">                        <div class="flex gap-15 align-center" style="margin-bottom: 10px">                            <span class="local-line">товаров (<span><?=$shop_count_products?></span>), на сумму</span>                            <span class="price"><?=VALUES::price_format($total_price_shop)?> P</span>                        </div>                        <a href="/placing?shop=<?=$k?>" class="btn action-btn" style="height: 48px">Перейти к оформлению</a>                    </div>                </footer>            </li>        <?php } ?>        </ul>    </div></section><!-- При рендаре robot ОБЯЗАТЕЛЬНО ПЕРЕДАЁМ room, type_room, params--><?php echo render('robot', [    'header_controller'=>true,  // настройка прячет phone-book в header    'room'=>'',    'type_room'=>'personal',    'params'=>[]]); ?><script>    let audio = $('audio').get(0);</script>