<?phpclass ACTIONS {    private array $actions = [];    function __construct() {        $ans = SUBD::getAllLinesDB('messages', 'active', 1);        if(is_array($ans)) {            $this->actions = $ans;        } else {            $this->actions = [];        }    }    private function del_mess($id) {        q("DELETE FROM `messages` WHERE `id` =".(int)$id);    }    public function scan_and_execute() {        if(count($this->actions)) {            foreach($this->actions as $k=>$v) {                if(date('Y-m-d H:i:s') >= $v['datatime']) {                    switch($v['action']) {                        case 'сообщение telegram':                            $us = SUBD::getLineDB('users', 'login', $v['target']);                            if(is_array($us)) {                                TELE::send_at_user_name($us['login'], $v['params']);                            }                            break;                        case 'отправка email':                            MAIL::sender($v['target'], 'Пришло сообщение в чат', $v['params']);                            break;                        default:                            break;                    }                    $this->del_mess($v['id']);                } else {                    switch($v['action']) {                    }                }            }        }    }}