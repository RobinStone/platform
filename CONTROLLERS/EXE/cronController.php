<?php$dt = date('H:i');$data = date('Y-m-d H:i:s');$act = new ACTIONS();$act->scan_and_execute();$hours_list = ['00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00',    '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00',    '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00'];if(in_array($dt, $hours_list)) {    q("UPDATE shops SET `active`=0 WHERE `active_to`<'".$data."' AND `title` <> 'Бесплатный' ");}ONLINE::clear_old();if($dt === '09:06') {    if(SUBD::OPTIMIZE_TABLE('online')) {//        t('Проведена ОПТИМИЗАЦИЯ ТАБЛИЦЫ -online-');    }}if($dt === '09:07') {    if(SUBD::ANALYZE_TABLE('online')) {//        t('Проведена чистка индексов ТАБЛИЦЫ -online-');    }}if($dt === '02:00') {    q("DELETE FROM `garbage` WHERE `load_time` < '".VALUES::minus_days(30)."' ");}if($dt === '23:58') {    $R = new REDISE();    $rooms = SUBD::getAllLinesDB('rooms', 'type', 'support');    $rooms = SQL_ROWS(q("SELECT * FROM `rooms` WHERE `type` IN ('support', 'product')"));    $del_arr = [];    foreach($rooms as $v) {        if($R->chanal_length($v['room_id']) === 0) {            $R->del($v['room_id']);            $del_arr[] = (int)$v['id'];        }    }    $cnt = count($del_arr);    if($cnt > 0) {        q("DELETE FROM `rooms` WHERE `id` IN (".implode(',',$del_arr).") ");    }}if($dt === '09:10') {    $date = date('Y-m-d H:i:s');    $date = date('Y_m_d', strtotime($date . ' -2 days'));//    t('Проведена авто-очистка папки /RESURSES/BUFF_IMGS/...');    $folderPath = './RESURSES/BUFF_IMGS';    $folders = array_filter(glob($folderPath . '/*'), 'is_dir');    foreach($folders as $k=>$v) {        if(explode('/',$v)[3] < $date) {            delete_folder($v);        }    }}exit;