<?phpinclude_CSS_once('/APPLICATIONS/SHOPS/CSS/favorite.css');$favorits = FAVORITE::get_favorite_list_orders(Access::userID(), [0,20]);$all = SHOP::get_products_list($favorits);$CATS = new CATALOGER();?><section class="my-orders">    <h2 class="h2">Избранное</h2>    <div onclick="mobile_back_row()" class="mobire-back-row flex align-center gap-10">        <span class="svg-wrapper"><?=RBS::SVG('left_long_row')?></span>    <span>Назад</span>    </div>    <ul id="products-list">        <?php        if(count($favorits) > 0) {        foreach($all as $v) {            $list = VALUES::translit($CATS->id2action_list($v['SHOP']['action_list'], true));            ?>            <li data-favorite-id="<?=$v['id']?>" data-id="<?=$v['product_id']?>" data-id-shop="<?=$v['shop_id']?>" class="flex gap-20 one-order align-center">                <div class="img-wrapper"><img width="300" height="180" src="/IMG/img300x300/<?=$v['SHOP']['IMG']?>"></div>                <div class="flex between column center-block">                    <h2 class="h2"><?=$v['SHOP']['PRODUCT_NAME']?></h2>                    <div class="price"><?=VALUES::price_format($v['SHOP']['PRICE'])?> P</div>                    <ul class="micro-block">                        <li class="flex align-center gap-10"><span class="svg-wrapper" style="min-width: 20px"><?=RBS::SVG('eye_green')?></span><span class="count-lines-3"><?=$v['SHOP']['DESCR']?></span></li>                    </ul>                </div>                <div class="right-block flex column gap-10">                    <a class="btn-gradient" href="/<?=$list?>/<?=$v['SHOP']['trans']?>?s=<?=$v['shop_id']?>&prod=<?=$v['product_id']?>">Перейти к объявлению</a>                    <a onclick="review_favorite(this)" class="btn-gradient">Оставить отзыв</a>                    <a onclick="remove_from_favorite(<?=$v['id']?>)" class="btn-gradient btn-red">Убрать из избранного</a>                </div>            </li>        <?php }        }        ?>    </ul>    <?php//    wtf($favorits, 1);//    wtf($all, 1);    ?></section><!--echo render('one-order', ['arr'=>$vvv]);--><script>    function remove_from_favorite(id) {        SENDER_APP('remove_from_favorite', {id: id}, function(mess) {            mess_executer(mess, function(mess) {                $('li[data-favorite-id="'+id+'"]').remove();            });        });    }    function review_favorite(obj) {        buffer_app = 'SHOPS';        obj = $(obj).closest('.one-order');        let txt = '';        let shop_id = parseInt($(obj).attr('data-id-shop'));        let product_id = parseInt($(obj).attr('data-id'));        save_tiny = function(html_cont) {            let stars = parseFloat($('.stars').attr('data-star'));            SENDER_APP('set_review_for_product', {shop_id: shop_id, product_id: product_id, html: html_cont, stars: stars}, function(mess) {                mess_executer(mess, function(mess) {                    say('Успешно...');                    setTimeout(function() {                        location.reload();                    }, 1000);                });            });        }        SENDER_APP('get_review_for_product', {shop_id: shop_id, product_id: product_id}, function(mess) {            mess_executer(mess, function(mess) {                console.dir(mess);                if(typeof mess.params.html !== 'undefined') {                    txt = mess.params.html;                    show_editor(txt, mess.params.stars);                } else {                    show_editor('');                }            });        });    }</script>